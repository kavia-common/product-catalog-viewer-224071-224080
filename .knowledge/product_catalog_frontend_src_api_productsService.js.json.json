{"is_source_file": true, "format": "JavaScript", "description": "This file implements a product data service with multiple data source strategies, including integration with Supabase, a REST API, and a mock fallback. It provides functions to list products, retrieve a product by ID, and fetch filter options such as categories, brands, and price range, with built-in fallbacks and feature flag controls.", "external_files": ["./supabaseClient", "./client"], "external_methods": ["getSupabaseClient", "getSupabaseConfig", "fetchProducts", "fetchProductById", "fetchFacetOptions"], "published": ["listProducts", "getProductById", "getFacetOptions"], "classes": [], "methods": [{"name": "listProducts(params = {})", "description": "Fetches a list of products with filtering and pagination, primarily via Supabase or falling back to a REST client if needed.", "scope": "", "scopeKind": ""}, {"name": "getProductById(id)", "description": "Retrieves a single product by its ID, using Supabase if available, with fallback to a REST client.", "scope": "", "scopeKind": ""}, {"name": "getFacetOptions()", "description": "Fetches distinct categories, brands, and price range options from the data source, with fallback.", "scope": "", "scopeKind": ""}, {"name": "normalizeProductRow(row)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["getSupabaseClient", "httpFetchProducts", "httpFetchProductById", "httpFetchFacetOptions", "sb.from", "sb.rpc", "normalizeProductRow"], "search-terms": ["productsService", "Supabase", "multi-source strategy", "listProducts", "getProductById", "getFacetOptions", "fallback", "mock_api"], "state": 2, "file_id": 22, "knowledge_revision": 50, "git_revision": "", "ctags": [{"_type": "tag", "name": "DEFAULT_PAGE_SIZE", "path": "/home/kavia/workspace/code-generation/product-catalog-viewer-224071-224080/product_catalog_frontend/src/api/productsService.js", "pattern": "/^const DEFAULT_PAGE_SIZE = 12;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "LOG_LEVEL", "path": "/home/kavia/workspace/code-generation/product-catalog-viewer-224071-224080/product_catalog_frontend/src/api/productsService.js", "pattern": "/^const LOG_LEVEL = process.env.REACT_APP_LOG_LEVEL || \"info\";$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "error", "path": "/home/kavia/workspace/code-generation/product-catalog-viewer-224071-224080/product_catalog_frontend/src/api/productsService.js", "pattern": "/^  error: (...a) => console.error(\"[ERROR]\", ...a),$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "getFacetOptions", "path": "/home/kavia/workspace/code-generation/product-catalog-viewer-224071-224080/product_catalog_frontend/src/api/productsService.js", "pattern": "/^export async function getFacetOptions() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getProductById", "path": "/home/kavia/workspace/code-generation/product-catalog-viewer-224071-224080/product_catalog_frontend/src/api/productsService.js", "pattern": "/^export async function getProductById(id) {$/", "language": "JavaScript", "kind": "function", "signature": "(id)"}, {"_type": "tag", "name": "info", "path": "/home/kavia/workspace/code-generation/product-catalog-viewer-224071-224080/product_catalog_frontend/src/api/productsService.js", "pattern": "/^  info: (...a) => {$/", "language": "JavaScript", "kind": "property", "scope": "logger", "scopeKind": "class"}, {"_type": "tag", "name": "listProducts", "path": "/home/kavia/workspace/code-generation/product-catalog-viewer-224071-224080/product_catalog_frontend/src/api/productsService.js", "pattern": "/^export async function listProducts(params = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "(params = {})"}, {"_type": "tag", "name": "logger", "path": "/home/kavia/workspace/code-generation/product-catalog-viewer-224071-224080/product_catalog_frontend/src/api/productsService.js", "pattern": "/^const logger = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "max", "path": "/home/kavia/workspace/code-generation/product-catalog-viewer-224071-224080/product_catalog_frontend/src/api/productsService.js", "pattern": "/^      max: typeof maxData === \"number\" ? maxData : 1000,$/", "language": "JavaScript", "kind": "property", "scope": "getFacetOptions.price", "scopeKind": "class"}, {"_type": "tag", "name": "min", "path": "/home/kavia/workspace/code-generation/product-catalog-viewer-224071-224080/product_catalog_frontend/src/api/productsService.js", "pattern": "/^      min: typeof minData === \"number\" ? minData : 0,$/", "language": "JavaScript", "kind": "property", "scope": "getFacetOptions.price", "scopeKind": "class"}, {"_type": "tag", "name": "normalizeProductRow", "path": "/home/kavia/workspace/code-generation/product-catalog-viewer-224071-224080/product_catalog_frontend/src/api/productsService.js", "pattern": "/^function normalizeProductRow(row) {$/", "language": "JavaScript", "kind": "function", "signature": "(row)"}, {"_type": "tag", "name": "price", "path": "/home/kavia/workspace/code-generation/product-catalog-viewer-224071-224080/product_catalog_frontend/src/api/productsService.js", "pattern": "/^    const price = {$/", "language": "JavaScript", "kind": "class", "scope": "getFacetOptions", "scopeKind": "class"}, {"_type": "tag", "name": "warn", "path": "/home/kavia/workspace/code-generation/product-catalog-viewer-224071-224080/product_catalog_frontend/src/api/productsService.js", "pattern": "/^  warn: (...a) => {$/", "language": "JavaScript", "kind": "constant"}], "hash": "7582c579b36b2b557306c27eb554b84b", "format-version": 4, "code-base-name": "product_catalog_frontend", "filename": "product_catalog_frontend/src/api/productsService.js", "fields": [{"name": "info: (...a) => {", "scope": "logger", "scopeKind": "class", "description": "unavailable"}, {"name": "max: typeof maxData === \"number\" ? maxData : 1000,", "scope": "getFacetOptions.price", "scopeKind": "class", "description": "unavailable"}, {"name": "min: typeof minData === \"number\" ? minData : 0,", "scope": "getFacetOptions.price", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"50": ""}]}